"use strict";(self.webpackChunkepos=self.webpackChunkepos||[]).push([[280],{5280:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var s=a(885),r=a(2791),n=a(4165),l=a(5861),c=a(7689),i=a(1788),u=a(9434),o=a(1840),m=(a(9806),a(7561)),x=a(184),d=function(e){var t=e.switchRegister,a=e.role,i=(0,c.s0)(),d=(0,u.I0)(),p=((0,c.TH)().state||{from:{pathname:"/"}}).from,g=(0,u.v9)(m.gs),f=(0,r.useState)(""),b=(0,s.Z)(f,2),h=b[0],y=b[1],j=(0,r.useState)(!1),w=(0,s.Z)(j,2),v=w[0],N=w[1],k=(0,r.useState)(""),Z=(0,s.Z)(k,2),S=Z[0],P=Z[1],C=(0,r.useState)(!1),D=(0,s.Z)(C,2),A=D[0],E=D[1];(0,r.useEffect)((function(){g&&i("/")}),[g]),(0,r.useEffect)((function(){y(""),P("")}),[]);var I=function(e){var t={message:"",status:!1};if(0===e)0===h.length?(t.message="Please input email",t.status=!1,N(!0)):/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(h)?0===S.length?(t.message="Please input password",t.status=!1,E(!0)):(t.message="",t.status=!0):(t.message="Invalid Email!",t.status=!1,N(!0));return t},W=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=I(0)).status){e.next=4;break}return d((0,o.jW)({message:t.message,status:"error"})),e.abrupt("return");case 4:d((0,m.jf)(h,S,a,p.pathname));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:"w-full px-[3rem] text-xl",children:[(0,x.jsxs)("div",{className:"flex flex-col my-[1rem] mb-[3rem] mt-[2rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-2",children:"Email:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"email",value:h,onChange:function(e){y(e.target.value),N(!1)}}),(0,x.jsx)("p",{className:"".concat(v?"text-red-400":"text-[#404040]"," text-sm"),children:"Email Address is not recognised. Please check again or register."})]}),(0,x.jsxs)("div",{className:"flex flex-col my-[1rem] mb-[3rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-2",children:"Password:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"password",value:S,onChange:function(e){P(e.target.value),E(!1)}}),(0,x.jsx)("p",{className:"".concat(A?"text-red-400":"text-[#404040]"," text-sm"),children:"Password incorrect/not found. Please check and try again."})]}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("button",{className:"w-[8rem] text-xl text-gray-100 text-left underline decoration-1 leading-[2.6rem]",onClick:function(){return t()},children:"Register"}),(0,x.jsx)("button",{className:"w-[8rem] text-xl leading-[2.6rem] rounded-[0.6rem] bg-[#D9D9D9] text-gray-800",onClick:function(){return W()},children:"Login"})]})]})},p=(a(1467),function(e){var t=e.role,a=(0,c.s0)(),d=(0,u.I0)(),p=((0,u.v9)(m.mU),(0,u.v9)(m.xv)),g=(0,r.useState)(!1),f=(0,s.Z)(g,2),b=(f[0],f[1]),h=(0,r.useState)(""),y=(0,s.Z)(h,2),j=y[0],w=y[1],v=(0,r.useState)(""),N=(0,s.Z)(v,2),k=N[0],Z=N[1],S=(0,r.useState)(""),P=(0,s.Z)(S,2),C=P[0],D=P[1],A=(0,r.useState)(""),E=(0,s.Z)(A,2),I=E[0],W=E[1],B=(0,r.useState)(""),R=(0,s.Z)(B,2),U=R[0],$=R[1],_=(0,r.useState)(""),H=(0,s.Z)(_,2),L=H[0],M=H[1],T=(0,r.useState)(""),V=(0,s.Z)(T,2),q=V[0],z=V[1],F=(0,r.useState)(""),G=(0,s.Z)(F,2),J=G[0],K=G[1],O=(0,r.useState)(!1),Q=(0,s.Z)(O,2),X=Q[0],Y=Q[1],ee=(0,r.useState)(!1),te=(0,s.Z)(ee,2),ae=te[0],se=te[1],re=(0,r.useState)(!1),ne=(0,s.Z)(re,2),le=ne[0],ce=ne[1],ie=(0,r.useState)(!1),ue=(0,s.Z)(ie,2),oe=ue[0],me=ue[1],xe=(0,r.useState)(!1),de=(0,s.Z)(xe,2),pe=de[0],ge=de[1],fe=(0,r.useState)(!1),be=(0,s.Z)(fe,2),he=be[0],ye=be[1],je=(0,r.useState)(!1),we=(0,s.Z)(je,2),ve=we[0],Ne=we[1],ke=(0,r.useState)(!1),Ze=(0,s.Z)(ke,2),Se=Ze[0],Pe=Ze[1],Ce=[(0,x.jsxs)("div",{className:"w-full h-full",children:[(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Email:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"email",value:j,onChange:function(e){w(e.target.value),Y(!1)}}),(0,x.jsx)("p",{className:"".concat(X?"text-red-400":"text-[#404040]"," text-sm"),children:"Email format incorrect. Please check and try again."})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Password:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"password",value:k,onChange:function(e){Z(e.target.value),se(!1)}}),(0,x.jsx)("p",{className:"".concat(ae?"text-red-400":"text-[#404040]"," text-sm"),children:"Password must be alphanumeric, > 8 characters and contain one symbol."})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Confirm Password:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"password",value:C,onChange:function(e){D(e.target.value),ce(!1)}}),(0,x.jsx)("p",{className:"".concat(le?"text-red-400":"text-[#404040]"," text-sm"),children:"Passwords do not match"})]})]}),(0,x.jsxs)("div",{className:"w-full h-full",children:[(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Business Name:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:I,onChange:function(e){W(e.target.value),me(!1)}}),(0,x.jsx)("p",{className:"".concat(oe?"text-red-400":"text-[#404040]"," text-sm"),children:"Business Name must be >2 characters"})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Address:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:U,onChange:function(e){$(e.target.value),ge(!1)}}),(0,x.jsx)("p",{className:"".concat(pe?"text-red-400":"text-[#404040]"," text-sm"),children:"Address must not be empty"})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Postcode:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:L,onChange:function(e){M(e.target.value),ye(!1)}}),(0,x.jsx)("p",{className:"".concat(he?"text-red-400":"text-[#404040]"," text-sm"),children:"Postcode must not be empty"})]})]}),(0,x.jsxs)("div",{className:"w-full h-full",children:[(0,x.jsx)("div",{className:"text-2xl font-bold mt-4 text-gray-100",children:"Add Users?"}),(0,x.jsxs)("div",{className:"flex flex-row items-center",children:[(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem] w-[60%]",children:[(0,x.jsxs)("div",{className:"flex flex-row items-center",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Name:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:q,onChange:function(e){z(e.target.value),Ne(!1)}})]}),(0,x.jsx)("p",{className:"".concat(ve?"text-red-400":"text-[#404040]"," text-sm"),children:"Name must be >2 characters"})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem] w-[40%]",children:[(0,x.jsxs)("div",{className:"flex flex-row items-center",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"PIN:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:J,onChange:function(e){K(e.target.value),Pe(!1)}})]}),(0,x.jsx)("p",{className:"".concat(Se?"text-red-400":"text-[#404040]"," text-sm"),children:"PIN should be 4 digits"})]}),(0,x.jsx)("button",{className:"w-[2rem] h-[2rem] text-xl rounded-[0.6rem] leading-[2rem] bg-[#D9D9D9] text-gray-800",children:"+"})]}),(0,x.jsx)("div",{className:"text-xl text-gray-100 mt-[10rem]",children:"Click next if no other users needed"})]})],De=(0,r.useState)(0),Ae=(0,s.Z)(De,2),Ee=Ae[0],Ie=Ae[1],We=Ce.reduce((function(e,t,a){return e[a]=(0,r.createRef)(),e}),{}),Be=Ce.length,Re=function(e){Ie(e),We[e].current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},Ue=function(e){var t={message:"",status:!1};switch(e){case 0:0===j.length?(t.message="Please input email",t.status=!1):/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(j)?0===k.length?(t.message="Please input password",t.status=!1):k.length<6?(t.message="Password must be > 5 characters",t.status=!1):0===C.length?(t.message="Please type confirm password",t.status=!1):k!==C?(t.message="Not match password",t.status=!1):(t.message="",t.status=!0):(t.message="Invalid Email!",t.status=!1);break;case 1:0===I.length?(t.message="Please input businessname",t.status=!1):0===U.length?(t.message="Please input address",t.status=!1):0===L.length?(t.message="Please input postcode",t.status=!1):(t.message="",t.status=!0)}return t},$e=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Ee){e.next=13;break}if((a=Ue(0)).status){e.next=5;break}return d((0,o.jW)({message:a.message,status:"error"})),e.abrupt("return");case 5:return e.next=7,i.W.checkUserByEmail(j);case 7:if(!e.sent.result){e.next=11;break}return d((0,o.jW)({message:"User with email: ".concat(j," already exists. Please check your email."),status:"error"})),e.abrupt("return");case 11:e.next=24;break;case 13:if(1!==Ee){e.next=20;break}if((s=Ue(1)).status){e.next=18;break}return d((0,o.jW)({message:s.message,status:"error"})),e.abrupt("return");case 18:e.next=24;break;case 20:if(2!==Ee){e.next=24;break}return d((0,m.a$)({businessname:I,address:U,postcode:L,email:j,password:k,role:t,username:q,userpin:J,token:void 0})),b(!0),e.abrupt("return");case 24:Ee>=Be-1||Re(Ee+1);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0!==Ee&&Re(Ee-1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){p&&a("/")}),[p]),(0,x.jsxs)("div",{className:"w-full px-[3rem] text-xl",children:[(0,x.jsx)("div",{className:"relative w-full h-full",children:(0,x.jsx)("div",{className:"carousel w-full h-full",children:Ce.map((function(e,t){return(0,x.jsx)("div",{className:"w-full h-full flex-shrink-0",ref:We[t],children:e},t)}))})}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("button",{className:"w-[5rem] text-xl text-gray-100 text-left underline decoration-1 leading-[2.6rem]",onClick:function(){return _e()},children:"Back"}),(0,x.jsx)("button",{className:"w-[8rem] text-xl leading-[2.6rem] rounded-[0.6rem] bg-[#D9D9D9] text-gray-800",onClick:function(){return $e()},children:"Next"})]})]})}),g=function(){var e=(0,r.useState)(!1),t=(0,s.Z)(e,2),a=t[0],n=t[1],l=(0,r.useState)("customer"),c=(0,s.Z)(l,2),i=c[0],u=c[1];return(0,x.jsx)("div",{className:"w-full h-[100vh] flex justify-center items-center",children:(0,x.jsxs)("div",{className:"w-[50vw] max-w-[1000px] min-w-[380px] min-h-[460px] rounded-[1rem] border border-white",children:[(0,x.jsxs)("div",{className:"flex border-b border-gray-300",children:[(0,x.jsx)("button",{className:"w-full text-xl leading-[3.6rem] rounded-t-[1rem] ".concat("customer"===i?"bg-[#D9D9D9] text-gray-800":"bg-transparent text-gray-100"),onClick:function(){return u("customer")},children:"Customers"}),(0,x.jsx)("button",{className:"w-full text-xl leading-[3.6rem] rounded-t-[1rem] ".concat("merchant"===i?"bg-[#D9D9D9] text-gray-800":"bg-transparent text-gray-100"),onClick:function(){return u("merchant")},children:"Merchants"})]}),a?(0,x.jsx)(p,{role:i}):(0,x.jsx)(d,{switchRegister:function(){n(!0)},role:i})]})})},f=function(){return(0,x.jsx)(g,{})}}}]);
//# sourceMappingURL=280.a17e483b.chunk.js.map