"use strict";(self.webpackChunkepos=self.webpackChunkepos||[]).push([[280],{5280:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var s=a(9439),r=a(2791),n=a(4165),l=a(5861),c=a(7689),u=a(1788),i=a(9434),o=a(1840),m=(a(9806),a(7561)),x=a(184),d=function(e){var t=e.switchRegister,a=e.role,u=(0,c.s0)(),d=(0,i.I0)(),p=((0,c.TH)().state||{from:{pathname:"/"}}).from,f=(0,i.v9)(m.gs),g=(0,r.useState)(""),b=(0,s.Z)(g,2),h=b[0],y=b[1],w=(0,r.useState)(!1),j=(0,s.Z)(w,2),v=j[0],N=j[1],k=(0,r.useState)(""),Z=(0,s.Z)(k,2),P=Z[0],S=Z[1],C=(0,r.useState)(!1),D=(0,s.Z)(C,2),A=D[0],E=D[1];(0,r.useEffect)((function(){f&&u("/")}),[f]),(0,r.useEffect)((function(){y(""),S("")}),[]);var W=function(e){var t={message:"",status:!1};if(0===e)0===h.length?(t.message="Please input email",t.status=!1,N(!0)):/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(h)?0===P.length?(t.message="Please input password",t.status=!1,E(!0)):(t.message="",t.status=!0):(t.message="Invalid Email!",t.status=!1,N(!0));return t},I=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=W(0)).status){e.next=4;break}return d((0,o.jW)({message:t.message,status:"error"})),e.abrupt("return");case 4:d((0,m.jf)(h,P,a,p.pathname));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:"w-full px-[3rem] text-xl",children:[(0,x.jsxs)("div",{className:"flex flex-col my-[1rem] mb-[3rem] mt-[2rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-2",children:"Email:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"email",value:h,onChange:function(e){y(e.target.value),N(!1)}}),(0,x.jsx)("p",{className:"".concat(v?"text-red-400":"text-[#404040]"," text-sm"),children:"Email Address is not recognised. Please check again or register."})]}),(0,x.jsxs)("div",{className:"flex flex-col my-[1rem] mb-[3rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-2",children:"Password:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"password",value:P,onChange:function(e){S(e.target.value),E(!1)}}),(0,x.jsx)("p",{className:"".concat(A?"text-red-400":"text-[#404040]"," text-sm"),children:"Password incorrect/not found. Please check and try again."})]}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("button",{className:"w-[8rem] text-xl text-gray-100 text-left underline decoration-1 leading-[2.6rem]",onClick:function(){return t()},children:"Register"}),(0,x.jsx)("button",{className:"w-[8rem] text-xl leading-[2.6rem] rounded-[0.6rem] bg-[#D9D9D9] text-gray-800",onClick:function(){return I()},children:"Login"})]})]})},p=(a(1467),function(e){var t=e.switchLogin,a=e.role,d=(0,c.s0)(),p=(0,i.I0)(),f=((0,i.v9)(m.mU),(0,i.v9)(m.xv)),g=(0,r.useState)(!1),b=(0,s.Z)(g,2),h=(b[0],b[1]),y=(0,r.useState)(""),w=(0,s.Z)(y,2),j=w[0],v=w[1],N=(0,r.useState)(""),k=(0,s.Z)(N,2),Z=k[0],P=k[1],S=(0,r.useState)(""),C=(0,s.Z)(S,2),D=C[0],A=C[1],E=(0,r.useState)(""),W=(0,s.Z)(E,2),I=W[0],U=W[1],B=(0,r.useState)(""),L=(0,s.Z)(B,2),R=L[0],$=L[1],_=(0,r.useState)(""),H=(0,s.Z)(_,2),M=H[0],T=H[1],V=(0,r.useState)([]),q=(0,s.Z)(V,2),z=q[0],F=q[1],G=(0,r.useState)([]),J=(0,s.Z)(G,2),K=J[0],O=J[1],Q=(0,r.useState)([]),X=(0,s.Z)(Q,2),Y=X[0],ee=X[1],te=(0,r.useState)(!1),ae=(0,s.Z)(te,2),se=ae[0],re=ae[1],ne=(0,r.useState)(!1),le=(0,s.Z)(ne,2),ce=le[0],ue=le[1],ie=(0,r.useState)(!1),oe=(0,s.Z)(ie,2),me=oe[0],xe=oe[1],de=(0,r.useState)(!1),pe=(0,s.Z)(de,2),fe=pe[0],ge=pe[1],be=(0,r.useState)(!1),he=(0,s.Z)(be,2),ye=he[0],we=he[1],je=(0,r.useState)(!1),ve=(0,s.Z)(je,2),Ne=ve[0],ke=ve[1],Ze=(0,r.useState)(!1),Pe=(0,s.Z)(Ze,2),Se=Pe[0],Ce=Pe[1],De=(0,r.useState)(!1),Ae=(0,s.Z)(De,2),Ee=Ae[0],We=Ae[1],Ie=[(0,x.jsxs)("div",{className:"w-full h-full",children:[(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Email:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"email",value:j,onChange:function(e){v(e.target.value),re(!1)}}),(0,x.jsx)("p",{className:"".concat(se?"text-red-400":"text-[#404040]"," text-sm"),children:"Email format incorrect. Please check and try again."})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Password:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"password",value:Z,onChange:function(e){P(e.target.value),ue(!1)}}),(0,x.jsx)("p",{className:"".concat(ce?"text-red-400":"text-[#404040]"," text-sm"),children:"Password must be alphanumeric, > 8 characters and contain one symbol."})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Confirm Password:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"password",value:D,onChange:function(e){A(e.target.value),xe(!1)}}),(0,x.jsx)("p",{className:"".concat(me?"text-red-400":"text-[#404040]"," text-sm"),children:"Passwords do not match"})]})]}),(0,x.jsxs)("div",{className:"w-full h-full",children:[(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Business Name:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:I,onChange:function(e){U(e.target.value),ge(!1)}}),(0,x.jsx)("p",{className:"".concat(fe?"text-red-400":"text-[#404040]"," text-sm"),children:"Business Name must be >2 characters"})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Address:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:R,onChange:function(e){$(e.target.value),we(!1)}}),(0,x.jsx)("p",{className:"".concat(ye?"text-red-400":"text-[#404040]"," text-sm"),children:"Address must not be empty"})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Postcode:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:M,onChange:function(e){T(e.target.value),ke(!1)}}),(0,x.jsx)("p",{className:"".concat(Ne?"text-red-400":"text-[#404040]"," text-sm"),children:"Postcode must not be empty"})]})]}),(0,x.jsxs)("div",{className:"w-full h-full",children:[(0,x.jsx)("div",{className:"text-2xl font-bold mt-4 text-gray-100",children:"Add Users?"}),(0,x.jsxs)("div",{className:"w-full h-[13rem] overflow-y-auto",children:[z.map((function(e,t){return(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:"flex flex-row items-center",children:[(0,x.jsx)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem] w-[55%]",children:(0,x.jsxs)("div",{className:"flex flex-row items-center",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Name:"}),(0,x.jsx)("div",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",children:e.username})]})}),(0,x.jsx)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem] w-[40%]",children:(0,x.jsxs)("div",{className:"flex flex-row items-center",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"PIN:"}),(0,x.jsx)("div",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",children:e.userpin})]})})]})},t)})),(0,x.jsxs)("div",{className:"flex flex-row items-center",children:[(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem] w-[55%]",children:[(0,x.jsxs)("div",{className:"flex flex-row items-center",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Name:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:K,onChange:function(e){O(e.target.value),Ce(!1)}})]}),(0,x.jsx)("p",{className:"".concat(Se?"text-red-400":"text-[#404040]"," text-sm"),children:"Name must be >2 characters"})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem] w-[40%]",children:[(0,x.jsxs)("div",{className:"flex flex-row items-center",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"PIN:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:Y,onChange:function(e){ee(e.target.value),We(!1)}})]}),(0,x.jsx)("p",{className:"".concat(Ee?"text-red-400":"text-[#404040]"," text-sm"),children:"PIN should be 4 digits"})]}),(0,x.jsx)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem] w-[5%]",children:(0,x.jsx)("button",{className:"w-[2rem] h-[2rem] text-xl rounded-[0.6rem] leading-[2rem] bg-[#D9D9D9] text-gray-800",onClick:function(){return Fe()},children:"+"})})]})]}),(0,x.jsx)("div",{className:"text-xl text-gray-100 mt-[3rem]",children:"Click next if no other users needed"})]})],Ue=(0,r.useState)(0),Be=(0,s.Z)(Ue,2),Le=Be[0],Re=Be[1],$e=Ie.reduce((function(e,t,a){return e[a]=(0,r.createRef)(),e}),{}),_e=Ie.length,He=function(e){Re(e),$e[e].current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},Me=function(e){var t={message:"",status:!1};switch(e){case 0:0===j.length?(t.message="Please input email",t.status=!1):/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(j)?0===Z.length?(t.message="Please input password",t.status=!1):Z.length<6?(t.message="Password must be > 5 characters",t.status=!1):0===D.length?(t.message="Please type confirm password",t.status=!1):Z!==D?(t.message="Not match password",t.status=!1):(t.message="",t.status=!0):(t.message="Invalid Email!",t.status=!1);break;case 1:0===I.length?(t.message="Please input businessname",t.status=!1):0===R.length?(t.message="Please input address",t.status=!1):0===M.length?(t.message="Please input postcode",t.status=!1):(t.message="",t.status=!0)}return t},Te=function(){var e={message:"",status:!1};return 0===K.length||K.length<2?(Ce(!0),e.status=!1):0===Y.length||!0===isNaN(Y)||Y.length<4||Y.length>4?(We(!0),e.status=!1):(e.message="",e.status=!0),e},Ve=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Le){e.next=13;break}if((t=Me(0)).status){e.next=5;break}return p((0,o.jW)({message:t.message,status:"error"})),e.abrupt("return");case 5:return e.next=7,u.W.checkUserByEmail(j);case 7:if(!e.sent.result){e.next=11;break}return p((0,o.jW)({message:"User with email: ".concat(j," already exists. Please check your email."),status:"error"})),e.abrupt("return");case 11:e.next=32;break;case 13:if(1!==Le){e.next=20;break}if((s=Me(1)).status){e.next=18;break}return p((0,o.jW)({message:s.message,status:"error"})),e.abrupt("return");case 18:e.next=32;break;case 20:if(2!==Le){e.next=32;break}if(!(K.length>0||Y.length>0)){e.next=29;break}if(Te().status){e.next=25;break}return e.abrupt("return");case 25:if(!ze(K)){e.next=29;break}return p((0,o.jW)({message:"User with username: ".concat(K," already exists. Please retype your username."),status:"error"})),e.abrupt("return");case 29:return p((0,m.a$)({businessname:I,address:R,postcode:M,email:j,password:Z,role:a,userproxy:z,username:K,userpin:Y,token:void 0})),h(!0),e.abrupt("return");case 32:Le>=_e-1||He(Le+1);case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0!==Le&&He(Le-1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(e){return z.filter((function(t){return t.username===e})).length>0},Fe=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te().status){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u.W.checkUserByProxyName(K);case 5:if(!e.sent.result){e.next=9;break}return p((0,o.jW)({message:"User with username: ".concat(K," already exists. Please retype your username."),status:"error"})),e.abrupt("return");case 9:if(!ze(K)){e.next=13;break}return p((0,o.jW)({message:"User with username: ".concat(K," already exists. Please retype your username."),status:"error"})),e.abrupt("return");case 13:(t=z).push({username:K,userpin:Y}),F(t),O(""),ee("");case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){f&&d("/")}),[f]),(0,x.jsxs)("div",{className:"w-full px-[3rem] text-xl",children:[(0,x.jsx)("div",{className:"relative w-full h-full",children:(0,x.jsx)("div",{className:"carousel w-full h-full",children:Ie.map((function(e,t){return(0,x.jsx)("div",{className:"w-full h-full flex-shrink-0",ref:$e[t],children:e},t)}))})}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("button",{className:"w-[5rem] text-xl text-gray-100 text-left underline decoration-1 leading-[2.6rem]",onClick:function(){return 0===Le?t():qe()},children:0===Le?"Login":"Back"}),(0,x.jsx)("button",{className:"w-[8rem] text-xl leading-[2.6rem] rounded-[0.6rem] bg-[#D9D9D9] text-gray-800",onClick:function(){return Ve()},children:"Next"})]})]})}),f=function(){var e=(0,r.useState)(!1),t=(0,s.Z)(e,2),a=t[0],n=t[1],l=(0,r.useState)("merchant"),c=(0,s.Z)(l,2),u=c[0],i=c[1];return(0,x.jsx)("div",{className:"w-full h-[100vh] flex justify-center items-center",children:(0,x.jsxs)("div",{className:"w-[50vw] max-w-[1000px] min-w-[380px] min-h-[460px] rounded-[1rem] border border-white",children:[(0,x.jsxs)("div",{className:"flex border-b border-gray-300",children:[(0,x.jsx)("button",{className:"w-full text-xl leading-[3.6rem] rounded-t-[1rem] ".concat("merchant"===u?"bg-[#D9D9D9] text-gray-800":"bg-transparent text-gray-100"),onClick:function(){return i("merchant")},children:"Merchants"}),(0,x.jsx)("button",{className:"w-full text-xl leading-[3.6rem] rounded-t-[1rem] ".concat("customer"===u?"bg-[#D9D9D9] text-gray-800":"bg-transparent text-gray-100"),onClick:function(){return i("customer")},children:"Customers"})]}),a?(0,x.jsx)(p,{switchLogin:function(){n(!1)},role:u}):(0,x.jsx)(d,{switchRegister:function(){n(!0)},role:u})]})})},g=function(){return(0,x.jsx)(f,{})}}}]);
//# sourceMappingURL=280.7817d040.chunk.js.map