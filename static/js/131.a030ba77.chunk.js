"use strict";(self.webpackChunkepos=self.webpackChunkepos||[]).push([[131],{432:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(2791),a=r(9434),s=r(9439),i=r(9241),c=r(3793),l=r(7689),o=r(9806),d=r(1632),u=r(4768),m=(r(1150),r(6007),r(1959)),x=r(1168),f=r(184),h=function(e){e.customSettingComponent;var t=e.searchBar,r=void 0===t||t,h=e.searchKeyword,p=void 0===h?"":h,v=(e.normalBar,e.disableRealestate,(0,l.s0)()),j=(0,l.TH)(),g=(0,n.useState)(!1),b=(0,s.Z)(g,2),y=(b[0],b[1],(0,a.v9)(u.dy)),w=(0,a.I0)(),N=(0,n.useState)(p),k=(0,s.Z)(N,2),F=(k[0],k[1],(0,a.v9)(m._6),(0,n.useState)("")),C=(0,s.Z)(F,2),Z=C[0],D=C[1],I=(0,n.useState)(""),S=(0,s.Z)(I,2),T=S[0],E=S[1],B=(0,n.useState)(!0),G=(0,s.Z)(B,2),R=G[0],W=G[1];return(0,n.useEffect)((function(){"/"===j.pathname?W(!1):W(!0)}),[j.pathname]),(0,f.jsx)("div",{className:"navbar w-full",children:(0,f.jsx)("div",{className:"flex items-center w-full justify-between",children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.v,{as:"div",className:"relative inline-block text-left nav-menu mr-5 mt-1",children:R&&(0,f.jsx)(i.v.Button,{onClick:function(){v("/")},"data-tip":!0,"data-for":"notificationId",className:"inline-flex w-full justify-center rounded-md text-sm text-gray-400 hover:text-gray-100",children:(0,f.jsx)(o.G,{icon:d.Uu6,className:"text-3xl"})})}),r&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("input",{className:"appearance-none italic bg-transparent border-b border-gray-300 w-[30%] text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"search",placeholder:"Search Product",value:Z,onChange:function(e){return D(e.target.value)},onKeyUp:function(e){"Enter"===e.code&&v("/search/product/"+Z)}}),(0,f.jsx)("input",{className:"appearance-none italic bg-transparent border-b border-gray-300 w-[30%] text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"search",placeholder:"Search Customer",value:T,onChange:function(e){return E(e.target.value)},onKeyUp:function(e){"Enter"===e.code&&v("/search/customer/"+T)}})]}),(0,f.jsxs)(i.v,{as:"div",className:"relative inline-block text-left nav-menu mt-1",children:[(0,f.jsx)(i.v.Button,{className:"inline-flex w-full justify-center rounded-md text-sm text-gray-400 hover:text-app-black",children:(0,f.jsx)(o.G,{icon:d.ILF,className:"text-4xl"})}),(0,f.jsx)(c.u,{as:n.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,f.jsx)(i.v.Items,{className:"absolute right-0 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-sm bg-white shadow-lg ring-2 ring-gray-200 focus:outline-none z-10",children:(0,f.jsxs)("div",{className:"px-1 py-1 ",children:[y&&(0,f.jsx)("div",{className:"bg-[#606060] text-gray-100 py-2 text-center font-bold",children:y.userproxy&&y.userproxy.length>0?y.userproxy[0].username:y.businessname}),(0,f.jsx)(i.v.Item,{children:function(e){var t=e.active;return(0,f.jsxs)("button",{className:"".concat(t?"bg-[#404040] text-white":"text-gray-900"," group  w-full items-center rounded-sm px-2 py-2 text-sm text-center"),onClick:function(){v("/wallet")},children:["Wallet \xa0",(0,f.jsx)("i",{className:"fa fa-right-from-backet",children:"\xa0"})]})}}),(0,f.jsx)(i.v.Item,{children:function(e){var t=e.active;return(0,f.jsxs)("button",{className:"".concat(t?"bg-[#404040] text-white":"text-gray-900"," group  w-full items-center rounded-sm px-2 py-2 text-sm text-center"),onClick:function(e){return w((0,x.g6)(0)),w((0,x.HT)()),void v("/logout")},children:["Logout \xa0",(0,f.jsx)("i",{className:"fa fa-right-from-backet",children:"\xa0"})]})}})]})})})]})]})})})},p=function(e){var t=e.children,r=e.showNavbar,s=void 0===r||r,i=e.navbarCustomSettingComponent,c=e.layoutClass,l=void 0===c?"bg-app-form-border":c,o=e.searchBar,d=e.searchKeyword,u=e.showNormal,m=void 0!==u&&u,x=e.noRealestate,p=void 0!==x&&x,v=e.classes,j=void 0===v?"":v;(0,a.I0)();return(0,n.useEffect)((function(){}),[]),(0,f.jsxs)("div",{className:"w-full min-h-screen bg-[#404040] ".concat(l),children:[s&&(m?(0,f.jsx)("div",{className:"px-6 md:px-10 lg:px-12 py-2",children:(0,f.jsx)(h,{normalBar:!0,disableRealestate:p})}):(0,f.jsx)("div",{className:"px-6 md:px-10 lg:px-12 py-2",children:(0,f.jsx)(h,{customSettingComponent:i,searchBar:o,searchKeyword:d,disableRealestate:p})})),(0,f.jsx)("div",{className:"".concat(j),children:t})]})}},9e3:function(e,t,r){var n=r(9439),a=r(2791),s=r(7689),i=r(3793),c=r(9593),l=r(9434),o=r(1840),d=r(184);t.Z=function(e){var t=e.isModal,r=e.setIsModal,u=e.cartsLink,m=e.registerFlag,x=e.handleRegister,f=(0,s.s0)(),h=(0,l.I0)(),p=(0,a.useState)(""),v=(0,n.Z)(p,2),j=v[0],g=v[1],b=function(){0!==j.length?(m?x(j):f(u+"/"+j),r(!1)):h((0,o.jW)({message:"Type saved order name.",status:"error"}))};return(0,a.useEffect)((function(){t&&g("")}),[t]),(0,d.jsx)(i.u,{appear:!0,show:t,as:a.Fragment,children:(0,d.jsxs)(c.V,{as:"div",onClose:function(){},className:"relative z-50",children:[(0,d.jsx)(i.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,d.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-[#FFFFFF44]","aria-hidden":"true"})}),(0,d.jsx)("div",{className:"fixed inset-0 flex items-center bg-transparent justify-center ",children:(0,d.jsx)(i.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,d.jsx)(c.V.Panel,{className:" max-w-full transform transition-all md:max-w-full",children:(0,d.jsxs)("div",{className:"relative bg-[#404040] w-[30vw] max-w-[1000px] min-w-[380px] min-h-[160px] rounded-[1rem] drop-shadow-md p-6 text-center shadow-xl",children:[(0,d.jsx)("div",{className:"",children:(0,d.jsx)("h1",{className:"text-md text-left text-[#D9D9D9] select-none",children:"Enter a name for the saved order:"})}),(0,d.jsx)("div",{className:"min-h-[2rem] pb-[0.5rem]",children:(0,d.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:j,onChange:function(e){return g(e.target.value)},onKeyUp:function(e){return function(e){"Enter"===e.code&&b()}(e)}})}),(0,d.jsxs)("div",{className:"absolute right-6 bottom-4",children:[(0,d.jsx)("button",{className:"w-[6rem] h-[2rem] text-md rounded-[0.6rem] leading-[2rem] bg-[#404040] border border-[#D9D9D9] text-gray-100 mr-6",onClick:function(){return r(!1)},children:"Cancel"}),(0,d.jsx)("button",{className:"w-[6rem] h-[2rem] text-md rounded-[0.6rem] leading-[2rem] bg-[#D9D9D9] text-gray-800",onClick:function(){return b()},children:"Confirm"})]})]})})})})]})})}},709:function(e,t,r){r.d(t,{Z:function(){return F}});var n=r(4165),a=r(5861),s=r(9439),i=r(2791),c=r(4768),l=r(1168),o=r(9434),d=r(9806),u=r(1632),m=r(7492),x=r(7577),f=r(5169),h=r(2057),p=r(1840),v=r(9e3),j=r(5135),g=r(7689),b=r(3793),y=r(9593),w=r(8389),N=r(184),k=function(e){var t=e.isModal,r=e.setIsModal,d=e.cposOrdered,u=((0,g.s0)(),(0,o.I0)(),(0,i.useState)("")),m=(0,s.Z)(u,2),x=(m[0],m[1],(0,o.v9)(c.dy)),p=(0,o.v9)(l.Rb),v=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,w.x.paystatusOrder(t);case 3:if(!e.sent.data.payment){e.next=7;break}return r(!1),e.abrupt("break",9);case 7:e.next=0;break;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){0!=p&&v(p)}),[p]),(0,N.jsx)(b.u,{appear:!0,show:t,as:i.Fragment,children:(0,N.jsxs)(y.V,{as:"div",onClose:function(){},className:"relative z-50",children:[(0,N.jsx)(b.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,N.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-[#FFFFFF44]","aria-hidden":"true"})}),(0,N.jsx)("div",{className:"fixed inset-0 flex items-center bg-transparent justify-center ",children:(0,N.jsx)(b.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,N.jsx)(y.V.Panel,{className:" max-w-full transform transition-all md:max-w-full",children:(0,N.jsxs)("div",{className:"relative bg-[#404040] w-[30vw] max-w-[1000px] min-w-[380px] min-h-[160px] rounded-[1rem] drop-shadow-md p-6 text-center shadow-xl",children:[(0,N.jsx)("div",{className:"",children:(0,N.jsx)("h1",{className:"text-md text-left text-[#D9D9D9] select-none",children:"Waiting for payment:"})}),(0,N.jsx)("div",{className:"min-h-[2rem] py-[1rem] flex justify-center mb-[1rem]",children:(0,N.jsx)(h.tv,{value:x?x.walpublic:"0x0000000000",level:"H",size:256})}),(0,N.jsx)("div",{className:"absolute right-6 bottom-4",children:d.coinAmount&&(0,N.jsxs)("h1",{className:"text-md text-left text-[#D9D9D9] select-none",children:["Amount: ",d.coinAmount.toFixed(2)," ",f.BL[d.coinType]]})})]})})})})]})})},F=function(){var e=(0,o.I0)(),t=(0,o.v9)(c.dy),r=(0,o.v9)(l.T),g=(0,o.v9)(l.l$),b=(0,o.v9)(m.nR),y=(0,o.v9)(l.$D),w=(0,o.v9)(l.FW),F=(0,o.v9)(l.H5),C=(0,i.useState)(0),Z=(0,s.Z)(C,2),D=Z[0],I=Z[1],S=(0,i.useState)(!1),T=(0,s.Z)(S,2),E=T[0],B=T[1],G=(0,i.useState)(!1),R=(0,s.Z)(G,2),W=R[0],K=R[1],$=(0,o.v9)(j.uj),_=(0,o.v9)(j.iq),H=(0,o.v9)(j.Dz),J=(0,o.v9)(j.mY),M=(0,o.v9)(j.vv),V=(0,o.v9)(j.P4),z=(0,i.useState)({}),A=(0,s.Z)(z,2),L=A[0],U=A[1],O=(0,i.useState)(!1),P=(0,s.Z)(O,2),Q=P[0];P[1];(0,i.useEffect)((function(){e((0,m.Xp)())}),[]),(0,i.useEffect)((function(){var e=0;r.map((function(t,r){var n=q(t.productId);e=(0,x.pD)(e,(0,x.J$)(n.price,t.amount))})),I(e)}),[g]);var q=function(e){return b.filter((function(t){return t._id===e}))[0]},X=function(){var s=(0,a.Z)((0,n.Z)().mark((function a(s){var i,c;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((0,p.jW)({message:"Getting coin price from network. Just a moment...",status:"error"})),n.next=3,(0,x.d$)(w,D,y);case 3:i=n.sent,c={name:s,merchantId:t._id,customerId:F._id,order:r,coinType:w,coinAmount:i},e((0,l.F5)(0,c)),ne(0),e((0,l.HT)());case 8:case"end":return n.stop()}}),a)})));return function(e){return s.apply(this,arguments)}}();(0,i.useEffect)((function(){ne(ee,!1)}),[]);var Y=[(0,N.jsx)("div",{className:"w-full h-full overflow-x-auto text-[#404040]",children:r.map((function(t,r){var n=q(t.productId);return(0,N.jsxs)("div",{className:"border-b border-gray-900 py-4",children:[(0,N.jsxs)("div",{className:"flex justify-between text-md",children:[(0,N.jsx)("div",{children:n.name}),(0,N.jsx)("div",{children:n.price.toFixed(2)})]}),(0,N.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,N.jsxs)("div",{children:["SKU: ",n.sku]}),(0,N.jsxs)("div",{className:"flex justify-center items-center",children:[(0,N.jsx)(d.G,{icon:u.Kl4,className:"cursor-pointer",onClick:function(){return function(t){var r={productId:t._id,amount:-1};e((0,l.JD)(r))}(n)}}),(0,N.jsx)("p",{className:"px-2 select-none",children:t.amount}),(0,N.jsx)(d.G,{icon:u.r8p,className:"cursor-pointer",onClick:function(){return function(t){var r={productId:t._id,amount:1};e((0,l.JD)(r))}(n)}})]})]})]},r)}))}),(0,N.jsx)("div",{className:"w-full h-full grid grid-cols-2 gap-2 text-center py-[2rem] px-[2rem]",children:f.tO.map((function(t,r){var n=function(e){var t=!1;switch(e){case 0:t=$;break;case 1:t=_;break;case 2:t=H;break;case 3:t=J;break;case 4:t=M;break;case 5:t=V}return t}(r);return n?(0,N.jsx)("div",{onClick:function(){return t=r,void e((0,l.LV)(t));var t},className:"w-[8rem] h-[8rem] flex justify-center items-center ".concat(w===r?"bg-[#B9B9B9]":""," border border-[#404040] text-[#404040] rounded-[1rem] select-none cursor-pointer"),children:(0,N.jsx)("p",{className:"w-[60%]",children:t})},r):(0,N.jsx)("div",{},r)}))}),(0,N.jsxs)("div",{className:"w-full h-full",children:[(0,N.jsx)("div",{className:"w-full h-[5rem]"}),(0,N.jsx)("div",{className:"w-full flex justify-center",children:(0,N.jsx)(h.tv,{value:t?t.walpublic:"0x0000000000",level:"H",size:256})}),(0,N.jsxs)("div",{className:"w-full text-center",children:[(0,N.jsx)("p",{className:"text-red-600 text-md my-[1rem]",children:"Please ensure block is confirmed before parting with goods/rendering services."}),t&&(0,N.jsxs)("p",{className:"text-[#404040] font-bold text-md my-[1rem]",children:["Check status of transaction here: ",(0,N.jsx)("a",{href:"".concat(f.Qf[w]).concat(t.walpublic),children:"".concat(f.Qf[w]).concat(t.walpublic)})]})]})]})],ee=(0,o.v9)(l.Ks),te=Y.reduce((function(e,t,r){return e[r]=(0,i.createRef)(),e}),{}),re=Y.length,ne=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e((0,l.g6)(t)),te[t].current.scrollIntoView({behavior:r?"smooth":"instant",block:"nearest",inline:"start"})},ae=function(){var s=(0,a.Z)((0,n.Z)().mark((function a(){var s,i;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==ee){n.next=7;break}if(0!==r.length){n.next=4;break}return e((0,p.jW)({message:"Empty orders.",status:"error"})),n.abrupt("return");case 4:if(F){n.next=7;break}return e((0,p.jW)({message:"Select customer.",status:"error"})),n.abrupt("return");case 7:if(2!==ee){n.next=17;break}return e((0,p.jW)({message:"Getting coin price from network.",status:"error"})),n.next=11,(0,x.d$)(w,D,y);case 11:s=n.sent,i={name:"cpos_ordered",merchantId:t._id,customerId:F._id,order:r,coinType:w,coinAmount:s},U(i),K(!0),e((0,l.F5)(0,i)),e((0,l.HT)());case 17:ne(ee>=re-1?0:ee+1);case 18:case"end":return n.stop()}}),a)})));return function(){return s.apply(this,arguments)}}(),se=function(){ne(0!==ee?ee-1:re-1)};return(0,N.jsxs)("div",{className:"bg-[#D9D9D9] h-[calc(100vh-80px)] w-[0px] sm:w-[360px] md:w-[360px] lg:w-[360px] xl:w-[360px] transition-all",children:[(0,N.jsxs)("div",{className:"w-full h-full relative",children:[(0,N.jsxs)("div",{className:"w-full h-[2rem] flex items-center text-[#404040]",children:[0!==ee&&(0,N.jsx)("button",{className:"w-[2rem] h-[2rem] text-md rounded-[6px] leading-[2rem] text-[#404040]",onClick:function(){return se()},children:(0,N.jsx)(d.G,{icon:u.Uu6})}),0===ee&&(0,N.jsx)("button",{className:"w-[2rem] h-[2rem] text-md rounded-[6px] leading-[2rem] text-[#404040]",children:(0,N.jsx)(d.G,{icon:u.ILF})}),(0,N.jsx)("p",{children:function(){var e="";switch(ee){case 0:e=F?F.businessname:"";break;case 1:e="Select crypto:";break;case 2:e="Customer to scan QR to complete order:"}return e}()})]}),(0,N.jsx)("div",{className:"w-full h-[68vh] px-4",children:(0,N.jsx)("div",{className:"relative w-full h-full",children:(0,N.jsx)("div",{className:"carousel w-full h-full",children:Y.map((function(e,t){return(0,N.jsx)("div",{className:"w-full h-full flex-shrink-0",ref:te[t],children:e},t)}))})})}),(0,N.jsxs)("div",{className:"w-full absolute bottom-0 px-6 py-2 text-[#404040]",children:[(0,N.jsxs)("div",{className:"flex justify-between",children:[(0,N.jsx)("p",{children:"Subtotal"}),(0,N.jsx)("p",{children:D.toFixed(2)})]}),(0,N.jsxs)("div",{className:"flex justify-between",children:[(0,N.jsxs)("p",{children:["VAT (@",(0,x.J$)(y,100),"%)"]}),(0,N.jsx)("p",{children:(0,x.J$)(D,y).toFixed(2)})]}),(0,N.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,N.jsx)("p",{children:"Total"}),(0,N.jsx)("p",{children:(0,x.pD)(D,(0,x.J$)(D,-y)).toFixed(2)})]}),(0,N.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,N.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,N.jsx)("button",{className:"w-[2rem] h-[2rem] text-md rounded-[6px] leading-[2rem] bg-[#404040] text-gray-100",onClick:function(){return ne(0),void e((0,l.HT)())},children:(0,N.jsx)(d.G,{icon:u.$aW})}),(0,N.jsx)("button",{className:"w-[2rem] h-[2rem] text-md rounded-[6px] leading-[2rem] bg-[#404040] text-gray-100",onClick:function(){0!==r.length?F?B(!0):e((0,p.jW)({message:"Select customer.",status:"error"})):e((0,p.jW)({message:"Empty orders.",status:"error"}))},children:(0,N.jsx)(d.G,{icon:u.EdJ})})]}),(0,N.jsx)("button",{className:"w-[9rem] h-[2rem] text-md rounded-[6px] leading-[2rem] bg-[#404040] text-gray-100",onClick:function(){return ae()},children:Q?"Calculating":function(){var e="";switch(ee){case 0:e="Checkout";break;case 1:e="Generate QR";break;case 2:e="Complete Order"}return e}()})]})]})]}),(0,N.jsx)(v.Z,{isModal:E,setIsModal:B,registerFlag:!0,handleRegister:X}),(0,N.jsx)(k,{isModal:W,setIsModal:K,cposOrdered:L})]})}}}]);
//# sourceMappingURL=131.a030ba77.chunk.js.map